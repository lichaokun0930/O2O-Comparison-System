# 比价数据目录清理清单

## ✅ 建议删除的文件（删除前会自动备份）

### 📁 分类1: 测试脚本 (约50+个文件)
```
test_*.py - 所有测试脚本
check_*.py - 所有检查脚本
verify_*.py - 所有验证脚本
diagnose_*.py - 所有诊断脚本
show_*.py - 所有展示脚本
analyze_*.py - 所有分析脚本
monitor_*.ps1 - 监控脚本
```

**具体文件**:
- test_abab_columns.py
- test_abab_logic.py
- test_actual_gpu.py
- test_authorization.py
- test_cost_fix.py
- test_gpu.py
- test_key_validation.py
- check_all_fixes.py
- check_columns.py
- check_cost_data.py
- verify_abab_fix.py
- diagnose_cache.py
- show_excel_data.py
- analyze_match_quality.py
- ...等约50个

### 📁 分类2: 临时修复脚本 (约15个文件)
```
fix_*.py
apply_*.py
restore_*.py
safe_*.py
add_*.py
```

**具体文件**:
- fix_all_store_name_calls.py
- fix_export_calls.py
- apply_abab_fix.py
- restore_cache_mechanism.py
- restore_with_fixes.py
- safe_fix_cfg.py
- add_cfg_param.py
- compare_results.py

### 📁 分类3: 备份文件 (2个文件)
```
product_comparison_tool_local_backup_20251101_183836.py
product_comparison_tool_local_backup_20251101_183843.py
```

### 📁 分类4: 打包相关脚本 (保留2个，删除约20个)

**✅ 保留**:
- 打包完整版_优化_clean.ps1 (最新的主打包脚本)
- 打包指纹工具.ps1 (指纹工具打包)

**❌ 删除**:
- pack_*.py (pack_2models.py, pack_dual_model.py, pack_fast.py等)
- build_*.py (build_exe.py, build_exe_full.py, build_exe_optimized.py)
- pre_pack_test.py
- 打包双核心模型版.ps1
- 打包双模型版_修正.ps1
- 打包双模式版.ps1
- 打包完整版.ps1 (旧版本)
- 打包完整版_优化.ps1 (旧版本)
- 打包完整版_clean.ps1 (旧版本)
- 打包PyQt6版本.ps1
- 打包PyQt6版本_clean.ps1
- 打包增量更新.ps1
- 更新PyQt6界面.ps1
- 一键打包.ps1
- 增量更新.ps1
- 快速更新主程序.ps1

### 📁 分类5: 打包日志 (约10个文件)
```
pack_log_*.txt (pack_log_011402.txt, pack_log_014731.txt等)
打包日志.txt
```

### 📁 分类6: 旧版本密钥相关 (约10个文件)

**✅ 保留**:
- 简化版密钥生成器.py (最新版本)
- 硬件指纹工具/ 目录 (独立工具)

**❌ 删除**:
- license_*.txt (所有测试密钥文件)
  - license_20251204.txt
  - license_2f4f7f10_20251203.txt
  - license_2f4f7f10_20260201.txt
  - license_a3f6b6b0_20251204.txt
  - license_Write-Ho_20251204.txt
- generate_license_key.py (旧版密钥生成器)
- generate_key_config.py (旧版配置)
- quick_gen_key.py (旧版快速生成)
- generate_fingerprint.py (根目录的旧版本)
- 授权密钥-闫依梦.txt (旧版本)
- 授权密钥-闫依梦-简化版.txt (旧版本)

### 📁 分类7: 日志文件 (约5个文件)
```
*.log (error.log, run.log, test_run.log等)
test_*.txt
*_result.txt
check_result.txt
matched_cols.txt
```

### 📁 分类8: 过期文档 (约30个文件)
```
第*次打包*.md (第6次、第7次、第10次等)
*修复说明.md
*验证报告.md
*实施*.md
*优化说明.md
GPU版本打包修复说明.md
硬件指纹工具打包修复.md
ABAB列排列修复说明.md
ABAB排列统一化修复方案.md
```

**具体文件**:
- 第6次打包验证报告.md
- 第7次打包-表头统一化效果总结.md
- 第10次打包验证报告.md
- 第19次打包验证报告.md
- 第20次打包验证报告.md
- 第21次打包修复说明.md
- 第22次打包优化说明.md
- 第29次打包说明.md
- 第29次打包优化说明.md
- 第30次打包修复说明.md
- 第30次打包操作指南.md
- 售价vs原价修复说明.md
- 成本倒推极端折扣修复说明.md
- 分类字段重组说明.md
- 双倒推优化说明.md
- 双倒推机制更新日志.md
- 双倒推逻辑说明.md
- 差异品逻辑优化方案.md
- 本次对话修复清单.md
- 本次打包修复清单.md
- 打包问题诊断报告.md
- 方案AC实施说明.md
- 方案A_打包缓存说明.md
- 方案B实施完成报告.md
- 方案B实施方案.md
- ...等

### 📁 分类9: 其他临时文件 (约5个文件)
```
authorized_keys.json
my_fingerprint.txt
打包方案对比.txt
organize_files.ps1
```

### 📁 分类10: 临时缓存目录 (4个目录，可能较大)
```
cache_backup/ - 缓存备份目录
temp_hf_cache/ - 临时 Hugging Face 缓存
temp_model_cache/ - 临时模型缓存
prebuilt_cache/ - 预构建缓存
```

---

## ⚠️ 需要审查的目录（建议手动删除）

这些目录可能较大，需要手动确认后删除：

```
build/ - 打包临时文件 (可能1-2GB)
__pycache__/ - Python 字节码缓存 (几十MB)
.venv/ - 虚拟环境 (如果不需要，可删除释放1-2GB)
```

---

## 📌 必须保留的重要文件

### 核心程序:
- ✅ product_comparison_tool_local.py (主程序)
- ✅ gui_launcher.py (GUI启动器)
- ✅ meituan_shop_goods_writer_breakpoint.py (数据采集)
- ✅ run_price_panel_etl.py (ETL管道)

### 密钥和授权:
- ✅ 简化版密钥生成器.py (最新密钥生成器)
- ✅ 硬件指纹工具/ 目录

### 打包脚本:
- ✅ 打包完整版_优化_clean.ps1 (最新打包脚本)
- ✅ 打包指纹工具.ps1

### 缓存文件 (重要):
- ✅ embedding_cache.joblib (向量缓存)
- ✅ cross_encoder_cache.joblib (交叉编码器缓存)
- ✅ similarity_matrix_cache.joblib (相似度矩阵缓存)

### 配置和文档:
- ✅ README.md
- ✅ CHANGELOG.md
- ✅ 13个Sheet完整使用指南_运营必读.md
- ✅ 使用说明.txt
- ✅ 用户使用手册.txt
- ✅ 管理员操作手册.txt
- ✅ 密钥管理指南.md
- ✅ 智能文件识别使用指南.md

### 数据目录:
- ✅ upload/ (上传目录)
- ✅ reports/ (报告输出)
- ✅ intermediate/ (中间数据)
- ✅ raw/ (原始数据)
- ✅ logs/ (运行日志)

### 打包输出:
- ✅ dist/ (打包程序目录)
- ✅ 硬件指纹工具.zip (打包好的指纹工具)

---

## 📊 预计清理效果

- **文件数量**: 约 150+ 个
- **释放空间**: 约 50-100 MB (不含缓存目录)
- **如果删除缓存目录**: 额外释放 100-500 MB
- **如果删除 build/**: 额外释放 1-2 GB
- **如果删除 .venv/**: 额外释放 1-2 GB

---

## 🚀 快速清理命令

### 方式1: 运行清理脚本（推荐，自动备份）
```powershell
.\分析并清理.ps1
```

### 方式2: 手动删除（不备份）
```powershell
# 删除测试脚本
Remove-Item test_*.py, check_*.py, verify_*.py, diagnose_*.py, show_*.py, analyze_*.py -Force

# 删除临时脚本
Remove-Item fix_*.py, apply_*.py, restore_*.py, safe_*.py, add_*.py -Force

# 删除备份文件
Remove-Item *backup*.py -Force

# 删除打包日志
Remove-Item pack_log_*.txt, 打包日志.txt -Force

# 删除旧密钥
Remove-Item license_*.txt -Force
Remove-Item generate_license_key.py, generate_key_config.py, quick_gen_key.py, generate_fingerprint.py -Force

# 删除日志
Remove-Item *.log, test_*.txt, *_result.txt -Force

# 删除临时缓存目录
Remove-Item cache_backup, temp_hf_cache, temp_model_cache, prebuilt_cache -Recurse -Force
```

### 方式3: 我帮你执行（安全，自动备份）
告诉我，我可以帮你执行清理，会先备份再删除。
